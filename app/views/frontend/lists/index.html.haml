- model_class = List
%p
%p
/TBD: refactor, Same form as search_index except 'id' field
= form_tag lists_path, :method => :get, remote: true do
  %p
    = text_field_tag :search, params[:search], :id => "gmaps-input-address", :input_html =>{:id => 'gmaps-input-address'}, :placeholder => 'Start typing a place...'
    = submit_tag "Search Near", :name => nil, :id=>"ajax" 

//Adding filter
= form_for_filterrific @filterrific do |f|
  .row
    .col-md-3
      .form-group.chardin_box{ :'data-position' => 'top', :'data-intro' => 'Search by bike type' }
        %label Bike Type
        = f.select(:with_subcategory_id, @filterrific.select_options[:with_subcategory_id],{ include_blank: '- Any -' })

    .col-md-3
      .form-group.chardin_box{ :'data-position' => 'top', :'data-intro' => 'Search by Rider Height' }
        %label Rider Height
        = f.select(:with_rider_height, @filterrific.select_options[:with_rider_height], { include_blank: '- Any -' } )

    .col-md-3
      .form-group.chardin_box{ :'data-position' => 'top', :'data-intro' => 'Search by Frame Size' }
        %label Frame Size
        = f.select(:with_frame_size, @filterrific.select_options[:with_frame_size], { include_blank: '- Any -' } )
    .col-md-3
      .form-group.chardin_box{ :'data-position' => 'top', :'data-intro' => 'Search by Rental' }
        %label Rental
        = f.select(:with_morning_rental_lt, @filterrific.select_options[:with_morning_rental_lt], { include_blank: '- Any -' } )         
                        
    / .col-md-2
    /   .form-group.chardin_box{ :'data-position' => 'top', :'data-intro' => 'Filter by listed date.' }
    /     %label Listed after
    /     = f.text_field :with_created_at_gte,
    /                    :class => 'js-datepicker form-control'

  .well.well-small
    .pull-right{ :'data-position' => 'bottom', :'data-intro' => 'Reset the filter settings to defaults.' }
      = link_to "Reset filters", reset_filterrific_url, :class => 'btn btn-default btn-sm'
    .chardin_box{ :'data-position' => 'bottom', :'data-intro' => 'Spinner indicates update.' }
      = render_filterrific_spinner
/ #results
/   = render :partial => 'students/list',
/            :locals => { :students => @students }


.row.no-gutter
  .col-lg-8.col-md-6.col-sm-6.hidden-xs
    #map

  .col-lg-4.col-md-6.col-sm-6
    #main-list
      %ul.media-list
        #ride
        #rides
          = render :partial => 'list', :locals => { :lists => @lists } 
        

/ #results
/   = render :partial => 'students/list',
/            :locals => { :students => @students }

= link_to t('.new', :default => t("helpers.links.new")), new_list_path, :class => 'btn btn-primary'



%script{:src => "//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"}
%script{:src => "//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js", :type => "text/javascript"}



:javascript

  $(document).ready(function(){
  
  

  var handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers(#{raw @hash.to_json });
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });
  });

//For date picker in the filter 
  $('.js-datepicker').datepicker();
  $('#overlayTrigger').click(function(event) {
    event.preventDefault();
    $('body').chardinJs('start');
  });
  